(function(e,c){var h=c(e.document),i=!!("ontouchstart" in h[0].documentElement),d=i?"touchstart":"mousedown",f=i?"touchend":"mouseup",g=!!("onselectstart" in h[0].documentElement),j=false,b={handler:"tbody > tr",tableDragClass:"sorting-table",disabledRowClass:"nodrag",dragClass:"sorting-row",onDragStart:null,onDrop:null};if(g){h[0].onselectstart=function(){if(j){return false}}}function a(u,w){var m=c.extend({},b,w),n=null,v=null,q=null,r=0,o=0;u=c(u);if(u.is("table")===false){throw new Error("Specified parameter is not a table.")}if(u.data("row-sorter-attached")!==true){u.on(d,m.handler,t);u.data("row-sorter-attached",true)}function t(x){n=u.find("tbody");n=n.length>0?n:u;v=n.find("tr");if(v.length<2){return true}q=c(this).closest("tr");if(q.length===0){return true}if(q.hasClass(m.disabledRowClass)){return true}j=true;o=v.index(q[0]);if(m.dragClass){q.addClass(m.dragClass)}if(m.tableDragClass){u.addClass(m.tableDragClass)}if(typeof m.onDragStart==="function"){m.onDragStart(n[0],q[0],o)}if(i){r=parseInt(x.originalEvent.touches[0].pageY,10);h.on("touchmove",k)}else{r=parseInt(x.pageY,10);v.not(q[0]).on("mousemove",p)}h.on(f,s);x.preventDefault();return false}function k(x){var z=x.originalEvent.touches[0],y=h[0].elementFromPoint(z.clientX,z.clientY);if(!y){return true}y=c(y).closest("tr");if(y&&y[0]!==q[0]&&y[0].parentNode===n[0]){l(y[0],z.pageY)}}function p(x){l(this,x.pageY)}function l(y,x){if(x>r&&y.nextSibling!==q[0]){if(y.nextSibling){n[0].insertBefore(q[0],y.nextSibling)}else{n[0].appendChild(q[0])}}else{if(x<=r&&y.previousSibling!==q[0]){n[0].insertBefore(q[0],y)}}r=x}function s(){var x;if(i){h.off("touchmove",k)}else{v.off("mousemove",p)}h.off(f,s);if(m.dragClass){q.removeClass(m.dragClass)}if(m.tableDragClass){u.removeClass(m.tableDragClass)}x=n.find("tr").index(q[0]);if(x!==o){if(typeof m.onDrop==="function"){m.onDrop(n[0],q[0],x,o)}}q=null;j=false;o=0}}c.fn.extend({rowSorter:function(k){this.each(function(l,m){a(m,k)})}})})(this,this.jQuery);
